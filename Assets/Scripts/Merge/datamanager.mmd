sequenceDiagram
    participant UnityEngine as Unity Engine
    participant DataManager
    participant Repositories as Repositories (IRepository)
    participant SO_JSON as 원본 데이터 (SO, JSON)

    UnityEngine->>DataManager: Awake() 호출
    activate DataManager
    DataManager->>DataManager: 싱글턴(_instance) 초기화
    DataManager->>SO_JSON: JSON 데이터 로드 (LoadAllData)
    deactivate DataManager

    UnityEngine->>Repositories: Awake() 호출 (순서 무관)
    activate Repositories
    Repositories->>Repositories: 싱글턴(_instance) 초기화
    deactivate Repositories

    UnityEngine->>DataManager: Start() 코루틴 시작
    activate DataManager
    DataManager->>DataManager: 1프레임 대기 (yield return null)

    UnityEngine->>Repositories: Start() 호출 (순서 무관)
    activate Repositories
    Repositories->>DataManager: 자신을 등록 (RegisterRepository(this))
    deactivate Repositories

    DataManager->>Repositories: 각 Repository의 Initialize() 호출
    activate Repositories
    Repositories->>SO_JSON: ScriptableObject 데이터 로드
    Repositories->>Repositories: 원본 데이터 조합하여 런타임 객체 생성<br/>(e.g., ConstructedBuilding 리스트)
    Repositories-->>DataManager: 초기화 완료 (IsInitialized = true)
    deactivate Repositories

    DataManager->>DataManager: 모든 Repository 초기화 완료까지 대기<br/>(WaitUntil... All(r => r.IsInitialized))
    
    DataManager->>Repositories: 가공된 런타임 데이터 요청<br/>(e.g., GetConstructedBuildings())
    activate Repositories
    Repositories-->>DataManager: 생성된 런타임 데이터 리스트 반환
    deactivate Repositories
    
    DataManager->>DataManager: 런타임 데이터 리스트 저장<br/>(DataManager.ConstructedBuildings)
    deactivate DataManager

    Note right of DataManager: 모든 데이터 준비 완료!
